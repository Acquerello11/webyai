<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Alice Moist Daily</title>
  <link href="https://fonts.googleapis.com/css2?family=Kanit&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* เพิ่ม/แก้ไข CSS สำหรับ modal */
    .modal {
      display: none;
      position: fixed;
      z-index: 1100;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.7);
      overflow: auto;
    }
    
    .modal-content {
      background-color: #fefefe;
      margin: auto;
      padding: 20px;
      border-radius: 10px;
      max-width: 800px;
      box-shadow: 0 5px 25px rgba(0,0,0,0.5);
      width: 90%;
      position: relative;
      top: 50%;
      transform: translateY(-50%);
      max-height: 85vh;
      overflow-y: auto;
    }

    .close-btn {
      color: #aaa;
      float: right;
      font-size: 35px;
      font-weight: bold;
      cursor: pointer;
      position: absolute;
      top: 15px;
      right: 20px;
      z-index: 10;
    }
    
    .close-btn:hover {
      color: #333;
    }

    /* ปรับขนาดและระยะห่างสำหรับ modal ประวัติการสั่งซื้อ */
    .order-history-modal {
      max-width: 1000px;
      width: 90%;
      padding: 0;
      display: flex;
      flex-direction: column;
    }

    .order-history-header {
      position: sticky;
      top: 0;
      z-index: 5;
      background: linear-gradient(135deg, #3498db, #2980b9);
      padding: 20px;
      color: white;
      border-radius: 10px 10px 0 0;
    }

    .order-history-controls {
      /* ลบ position: sticky และ top */
      z-index: 4;
      background: #f8f9fa;
      padding: 15px;
      border-bottom: 1px solid #eee;
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      border-radius: 0 0 10px 10px;
    }

    .filter-group {
      display: flex;
      flex-direction: column;
      min-width: 200px;
      flex: 1;
    }
    
    .filter-group label {
      font-weight: 500;
      margin-bottom: 5px;
      color: #2c3e50;
    }
    
    .filter-select {
      padding: 8px 12px;
      border-radius: 6px;
      border: 1px solid #ddd;
      font-family: 'Kanit', sans-serif;
      background: white;
    }
    
    .search-input {
      display: flex;
    }
    
    .search-input input {
      flex: 1;
      padding: 8px 12px;
      border: 1px solid #ddd;
      border-radius: 6px 0 0 6px;
      font-family: 'Kanit', sans-serif;
    }
    
    .search-input button {
      background: #3498db;
      color: white;
      border: none;
      border-radius: 0 6px 6px 0;
      padding: 0 15px;
      cursor: pointer;
    }

    .order-history-container {
      padding: 15px;
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
      gap: 20px;
      max-height: calc(85vh - 250px); /* ปรับ max-height ให้พอดี */
      overflow-y: auto;
    }

    /* ปรับขนาดสำหรับมือถือ */
    @media (max-width: 768px) {
      .modal-content {
        top: 40px;
        transform: none;
        max-height: calc(100vh - 80px);
      }
      
      .order-history-controls {
        top: 60px;
      }
      
      .order-history-container {
        grid-template-columns: 1fr;
        max-height: calc(100vh - 300px);
      }
    }

    @media (max-width: 480px) {
      .modal-content {
        width: 95%;
        padding: 15px;
        top: 20px;
        max-height: calc(100vh - 40px);
      }
      
      .order-history-header {
        padding: 15px;
      }
      
      .order-history-controls {
        padding: 10px;
        flex-direction: column;
      }
      
      .filter-group {
        width: 100%;
        margin-bottom: 10px;
      }
      
      .order-history-container {
        max-height: calc(100vh - 350px);
      }
    }

    /* สไตล์เดิมทั้งหมด */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Kanit', sans-serif;
      background: #f0f8ff;
      color: #2c3e50;
    }
    .navbar {
      position: relative;
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: linear-gradient(135deg, #3498db, #2980b9);
      padding: 0px 15px;
      color: white;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
      z-index: 1001;
      height: 70px;
    }
    .navbar-left {
      font-size: 32px;
      font-weight: bold;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .nav-links {
      display: flex;
      gap: 30px;
    }
    .nav-item {
      color: white;
      text-decoration: none;
      font-size: 22px;
      padding: 8px 0;
      transition: opacity 0.2s;
      position: relative;
    }
    .nav-item:hover {
      opacity: 0.8;
    }
    .nav-item::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 0;
      height: 2px;
      background-color: white;
      transition: width 0.3s ease;
    }
    .nav-item:hover::after {
      width: 100%;
    }
    .nav-buttons {
      display: flex;
      align-items: center;
      gap: 15px;
      position: relative;
    }
    .profile {
      position: relative;
    }
    .username-display {
      display: flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
      background: rgba(255, 255, 255, 0.2);
      padding: 6px 12px;
      border-radius: 20px;
      transition: background 0.3s;
    }
    .username-display:hover {
      background: rgba(255, 255, 255, 0.3);
    }
    .username-text {
      max-width: 120px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    .dropdown-menu {
      display: none;
      position: absolute;
      right: 0;
      top: 100%;
      background: white;
      color: #333;
      border-radius: 8px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
      min-width: 220px;
      z-index: 1000;
      margin-top: 8px;
      display: none;
      flex-direction: column;
      overflow: hidden;
    }
    .dropdown-menu.show {
      display: flex;
    }
    .dropdown-header {
      padding: 15px;
      background: #f0f8ff;
      border-bottom: 1px solid #ddd;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .dropdown-username {
      font-weight: bold;
      font-size: 16px;
      color: #2980b9;
    }
    .dropdown-email {
      font-size: 12px;
      color: #777;
      margin-top: 3px;
    }
    .dropdown-menu a {
      display: flex;
      align-items: center;
      padding: 12px 15px;
      text-decoration: none;
      color: #333;
      border-bottom: 1px solid #eee;
      font-size: 14px;
      transition: background-color 0.2s ease;
    }
    .dropdown-menu a:last-child {
      border-bottom: none;
    }
    .dropdown-menu a:hover {
      background-color: #f6f6f6;
    }
    .dropdown-menu i {
      margin-right: 10px;
      width: 20px;
      text-align: center;
    }
    .btn {
      background: transparent;
      border: none;
      color: white;
      font-size: 18px;
      cursor: pointer;
      transition: transform 0.2s;
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      position: relative;
    }
    .btn:hover {
      transform: scale(1.1);
      background: rgba(255,255,255,0.2);
    }
    .cart-badge {
      position: absolute;
      top: -5px;
      right: -5px;
      background-color: #e74c3c;
      color: white;
      border-radius: 50%;
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      font-weight: bold;
    }
    .hamburger {
      display: none;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      width: 30px;
      height: 30px;
      background-color: transparent;
      border-radius: 0;
      box-shadow: none;
      cursor: pointer;
      transition: transform 0.3s;
      position: relative;
      z-index: 1001;
    }
    .hamburger span {
      background: white;
      height: 2px;
      width: 20px;
      margin: 3px 0;
      border-radius: 2px;
      transition: 0.3s;
      transform-origin: center;
    }
    .hamburger.active span:nth-child(1) {
      transform: rotate(48deg) translate(6px, 5px);
      width: 25px;
      height: 2px;
    }
    .hamburger.active span:nth-child(2) {
      opacity: 0;
    }
    .hamburger.active span:nth-child(3) {
      transform: rotate(-48deg) translate(6px, -5px);
      width: 25px;
      height: 2px;
    }
    .mobile-menu {
      display: none;
      flex-direction: column;
      position: fixed;
      top: 30px;
      left: 0px;
      width: 70%;
      height: 100%;
      background: white;
      box-shadow: 2px 0 8px rgba(0,0,0,0.2);
      padding: 70px 20px 20px;
      z-index: 1000;
      overflow-y: auto;
      gap: 10px;
    }
    .mobile-menu.show {
      display: flex;
    }
    .mobile-menu .nav-item {
      color: #333;
      padding: 12px 15px;
      margin-bottom: 5px;
      border-radius: 6px;
      background-color: #f0f8ff;
      text-decoration: none;
    }
    .mobile-menu .nav-item:hover {
      background-color: #000000;
      color: white;
    }
    .overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 999;
    }
    .overlay.show {
      display: block;
    }
    .banner {
      background: linear-gradient(135deg, #c7ecee 0%, #d6f0f7 100%);
      padding: 40px 0;
      text-align: center;
    }
    .banner-content {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: center;
      gap: 30px;
    }
    .banner-text {
      max-width: 600px;
      padding: 0 15px;
    }
    .banner h1 {
      font-size: 1.8rem;
      margin-bottom: 15px;
      color: #0077b6;
      line-height: 1.3;
    }
    .banner p {
      font-size: 1rem;
      color: #555;
    }
    .banner-image {
      padding: 0 15px;
    }
    .banner-image img {
      width: 100%;
      max-width: 400px;
      height: auto;
      border-radius: 15px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }
    .container {
      max-width: 1500px;
      margin: auto;
      padding: 15px;
    }
    .product-section {
      display: flex;
      flex-wrap: wrap;
      margin: 30px 0;
      background-color: #fff;
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
      overflow: hidden;
    }
    .product-image {
      flex: 1;
      min-width: 300px;
      padding: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: #f8f9fa;
    }
    .product-image img {
      width: 100%;
      max-width: 400px;
      height: auto;
      border-radius: 8px;
    }
    .product-details {
      flex: 1;
      min-width: 300px;
      padding: 20px;
    }
    .product-title {
      font-size: 1.5rem;
      margin-bottom: 15px;
      color: #0077b6;
    }
    .product-subtitle {
      font-size: 1rem;
      color: #666;
      margin-bottom: 20px;
    }
    .price {
      font-size: 1.4rem;
      font-weight: 700;
      color: #2ecc71;
      margin-bottom: 20px;
      line-height: 1.4;
    }
    .price small {
      font-size: 0.9rem;
      color: #666;
      font-weight: normal;
    }
    .shipping-notice {
      background-color: #e3f2fd;
      padding: 10px 15px;
      border-radius: 5px;
      margin-bottom: 25px;
      display: inline-flex;
      align-items: center;
      color: #0077b6;
      font-size: 0.95rem;
    }
    .shipping-notice i {
      margin-right: 8px;
      color: #2ecc71;
    }
    .prescription-selection {
      margin-bottom: 30px;
    }
    .prescription-selection h3 {
      margin-bottom: 15px;
      font-size: 1.1rem;
    }
    .eye-selection {
      display: flex;
      gap: 20px;
      margin-bottom: 15px;
    }
    .eye-btn {
      flex: 1;
      padding: 12px;
      background-color: #0077b6;
      color: white;
      border: none;
      border-radius: 5px;
      font-size: 14px;
      cursor: pointer;
      transition: background-color 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .eye-btn:hover {
      background-color: #005f92;
    }
    .eye-btn i {
      margin-right: 8px;
    }
    .selected-value {
      margin-top: 10px;
      padding: 10px;
      background-color: #e3f2fd;
      border-radius: 5px;
      text-align: center;
      font-size: 13px;
      display: none;
    }
    .summary {
      border-top: 1px solid #eee;
      padding-top: 20px;
    }
    .total-price {
      font-size: 1.1rem;
      margin-bottom: 20px;
    }
    .total-price span {
      font-weight: 700;
      color: #2ecc71;
    }
    .action-buttons {
      display: flex;
      gap: 15px;
    }
    .add-to-cart, .buy-now {
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      font-size: 0.95rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
    }
    .add-to-cart {
      background-color: #fff;
      color: #0077b6;
      border: 2px solid #0077b6;
    }
    .add-to-cart:hover {
      background-color: #e3f2fd;
    }
    .buy-now {
      background-color: #2ecc71;
      color: white;
    }
    .buy-now:hover {
      background-color: #27ae60;
    }
    .product-info {
      background-color: #fff;
      padding: 30px 0;
      margin: 30px 0;
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
    }
    .product-info h2 {
      text-align: center;
      margin-bottom: 20px;
      color: #0077b6;
      font-size: 1.7rem;
    }
    .product-info p {
      text-align: center;
      max-width: 800px;
      margin: 0 auto 30px;
      font-size: 1rem;
      color: #555;
      padding: 0 15px;
    }
    .info-boxes {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      justify-content: center;
      padding: 0 15px;
    }
    .whats-included, .how-to-use {
      flex: 1;
      min-width: 300px;
      max-width: 500px;
      background-color: #f8f9fa;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
    }
    .whats-included h3, .how-to-use h3 {
      color: #0077b6;
      margin-bottom: 15px;
      font-size: 1.1rem;
    }
    .whats-included ul, .how-to-use ol {
      padding-left: 20px;
    }
    .whats-included li, .how-to-use li {
      margin-bottom: 8px;
      font-size: 0.95rem;
    }
    footer {
      background-color: #2c3e50;
      color: #ecf0f1;
      padding: 30px 0 15px;
    }
    .footer-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      gap: 20px;
      padding: 0 15px;
    }
    .footer-section {
      flex: 1;
      min-width: 200px;
    }
    .footer-section h3 {
      color: #fff;
      margin-bottom: 15px;
      font-size: 1.1rem;
    }
    .footer-section ul {
      list-style: none;
      padding-left: 0;
    }
    .footer-section li {
      margin-bottom: 8px;
      font-size: 0.9rem;
    }
    .footer-section a {
      color: #bdc3c7;
      text-decoration: none;
      transition: color 0.3s;
    }
    .footer-section a:hover {
      color: #2ecc71;
    }
    .contact-info li {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .social-links {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }
    .social-links a {
      font-size: 1.3rem;
      color: #2ecc71;
    }
    .payment-methods {
      display: flex;
      gap: 8px;
    }
    .payment-methods i {
      font-size: 1.7rem;
    }
    .copyright {
      text-align: center;
      margin-top: 30px;
      padding-top: 15px;
      border-top: 1px solid #34495e;
      color: #bdc3c7;
      font-size: 0.85rem;
      padding: 0 15px;
    }
    
    /* ปรับการแสดงผลสำหรับมือถือ */
    @media (max-width: 880px) {
      .navbar {
        padding: 0 10px;
        height: 60px;
      }
      
      .navbar-left {
        font-size: 24px;
      }
      
      .nav-buttons {
        gap: 8px;
      }
      
      .username-display {
        padding: 4px 8px;
      }
      
      .btn {
        width: 30px;
        height: 30px;
      }
      
      .cart-badge {
        top: -3px;
        right: -3px;
        width: 16px;
        height: 16px;
        font-size: 10px;
      }
      
      .hamburger {
        display: flex;
      }
      
      .nav-links {
        display: none;
      }
      
      .product-section {
        flex-direction: column;
        margin: 15px 0;
      }
      
      .product-image img {
        max-width: 100%;
        height: auto;
        padding: 10px;
      }
      
      .eye-selection {
        flex-direction: column;
        gap: 15px;
      }
      
      .action-buttons {
        flex-direction: column;
        gap: 10px;
      }
      
      .add-to-cart, .buy-now {
        width: 100%;
        padding: 12px;
        font-size: 14px;
        box-sizing: border-box;
      }
      
      .product-details {
        padding: 15px;
      }
      
      .banner-content {
        flex-direction: column;
      }
      
      .banner-text {
        order: 2;
      }
      
      .banner-image {
        order: 1;
      }
      
      .footer-container {
        flex-direction: column;
        gap: 30px;
      }
    }
    
    /* ปรับขนาดหน้าจอเล็กมาก (โทรศัพท์ขนาดเล็ก) */
    @media (max-width: 480px) {
      .banner h1 {
        font-size: 1.5rem;
      }
      
      .banner p {
        font-size: 0.9rem;
      }
      
      .product-title {
        font-size: 1.3rem;
      }
      
      .price {
        font-size: 1.1rem;
      }
      
      .eye-btn {
        font-size: 13px;
      }
      
      .footer-section {
        min-width: 100%;
      }
      
      .navbar-left img {
        height: 70px;
        border-radius: 25px;
      }
    }
    
    .prescription-type {
      display: flex;
      margin: 20px 0;
      border-radius: 5px;
      overflow: hidden;
    }
    .prescription-type button {
      flex: 1;
      padding: 10px;
      border: none;
      background-color: #e0e0e0;
      cursor: pointer;
      font-weight: bold;
      font-size: 14px;
    }
    .prescription-type button.active {
      background-color: #0077b6;
      color: white;
    }
    .prescription-grid {
      width: 100%;
      border-collapse: collapse;
      margin: 15px 0;
      font-size: 14px;
    }
    .prescription-grid td {
      padding: 10px;
      text-align: center;
      border: 1px solid #ddd;
      cursor: pointer;
      transition: background-color 0.2s;
    }
    .prescription-grid td:hover {
      background-color: #f0f8ff;
    }
    .current-selection {
      margin: 20px 0;
      padding: 12px;
      background-color: #f0f8ff;
      border-radius: 5px;
      text-align: center;
      font-size: 14px;
    }
    .confirm-btn {
      width: 100%;
      padding: 12px;
      background-color: #2ecc71;
      color: white;
      border: none;
      border-radius: 5px;
      font-size: 16px;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    .confirm-btn:hover {
      background-color: #27ae60;
    }
    
    /* สไตล์สำหรับตะกร้าสินค้า */
    .cart-modal {
      display: none;
      position: fixed;
      z-index: 1003;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.5);
    }
    .cart-content {
      background-color: #fff;
      margin: 5% auto;
      padding: 25px;
      border-radius: 10px;
      max-width: 800px;
      width: 90%;
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
      max-height: 80vh;
      overflow-y: auto;
    }
    .cart-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      border-bottom: 2px solid #3498db;
      padding-bottom: 10px;
    }
    .cart-items {
      margin-bottom: 20px;
    }
    .cart-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px;
      border-bottom: 1px solid #eee;
    }
    .cart-item img {
      width: 80px;
      height: 80px;
      object-fit: contain;
      border-radius: 8px;
      margin-right: 15px;
    }
    .cart-item-details {
      flex: 2;
    }
    .cart-item-title {
      font-weight: bold;
      margin-bottom: 5px;
    }
    .cart-item-prescription {
      color: #666;
      font-size: 0.9rem;
      margin-bottom: 5px;
    }
    .cart-item-price {
      color: #2ecc71;
      font-weight: bold;
    }
    .cart-item-actions {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
    }
    .cart-item-remove {
      color: #e74c3c;
      background: none;
      border: none;
      cursor: pointer;
      font-size: 1.2rem;
      padding: 5px;
    }
    .cart-summary {
      border-top: 2px solid #eee;
      padding-top: 20px;
      text-align: right;
    }
    .cart-total {
      font-size: 1.2rem;
      margin-bottom: 20px;
    }
    .cart-total span:last-child {
      font-weight: bold;
      color: #2ecc71;
    }
    .cart-actions {
      display: flex;
      justify-content: flex-end;
      gap: 15px;
    }
    .continue-shopping {
      background-color: #f0f0f0;
      color: #333;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
      border: none;
    }
    .checkout {
      background-color: #2ecc71;
      color: white;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
      border: none;
    }
    .empty-cart {
      text-align: center;
      padding: 30px;
      color: #777;
    }
    .empty-cart i {
      font-size: 3rem;
      margin-bottom: 15px;
      color: #bdc3c7;
    }
    
    .quantity-controls {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-top: 10px;
    }
    
    .quantity-btn {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      background-color: #3498db;
      color: white;
      border: none;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      cursor: pointer;
      transition: background-color 0.2s;
    }
    
    .quantity-btn:hover {
      background-color: #2980b9;
    }
    
    .quantity-display {
      min-width: 30px;
      text-align: center;
      font-weight: bold;
    }
    
    /* เพิ่มสไตล์สำหรับการแจ้งเตือน */
    .login-alert {
      text-align: center;
      padding: 15px;
      background-color: #fff3cd;
      border-radius: 5px;
      margin: 15px 0;
      color: #856404;
      display: none;
    }
    
    .login-alert i {
      margin-right: 8px;
      color: #ffc107;
    }
    
    /* เพิ่มสไตล์สำหรับโมดอลล็อกอิน/สมัครสมาชิก */
    .auth-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.7);
      z-index: 2000;
      justify-content: center;
      align-items: center;
    }
    
    .auth-modal.show {
      display: flex;
    }
    
    .auth-container {
      background: white;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
      width: 90%;
      max-width: 450px;
      overflow: hidden;
      animation: modalFadeIn 0.3s ease-out;
    }
    
    @keyframes modalFadeIn {
      from { opacity: 0; transform: translateY(-50px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .auth-header {
      background: linear-gradient(135deg, #3498db, #2980b9);
      color: white;
      padding: 20px;
      text-align: center;
      position: relative;
    }
    
    .auth-close {
      position: absolute;
      top: 15px;
      right: 15px;
      font-size: 24px;
      cursor: pointer;
      color: white;
    }
    
    .auth-tabs {
      display: flex;
      background: #2980b9;
    }
    
    .auth-tab {
      flex: 1;
      padding: 15px;
      text-align: center;
      cursor: pointer;
      font-weight: 500;
      transition: background 0.3s;
    }
    
    .auth-tab.active {
      background: #3498db;
    }
    
    .auth-content {
      padding: 25px;
    }
    
    .auth-form {
      display: none;
    }
    
    .auth-form.active {
      display: block;
    }
    
    .auth-form-group {
      margin-bottom: 20px;
    }
    
    .auth-form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
    }
    
    .auth-form-group input {
      width: 100%;
      padding: 12px 15px;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      font-size: 16px;
      font-family: 'Kanit', sans-serif;
    }
    
    .auth-form-group input:focus {
      border-color: #3498db;
      outline: none;
      box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
    }
    
    .auth-btn {
      width: 100%;
      padding: 14px;
      background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s;
      margin-top: 10px;
    }
    
    .auth-btn:hover {
      background: linear-gradient(135deg, #2980b9 0%, #3498db 100%);
    }
    
    .auth-footer {
      text-align: center;
      margin-top: 20px;
      padding-top: 15px;
      border-top: 1px solid #eee;
      font-size: 14px;
    }
    
    .auth-footer a {
      color: #3498db;
      text-decoration: none;
      font-weight: 500;
    }
    
    .auth-footer a:hover {
      text-decoration: underline;
    }
    
    .auth-error {
      color: #e74c3c;
      font-size: 14px;
      margin-top: 5px;
      display: none;
    }
    
    /* สไตล์สำหรับการแจ้งเตือน */
    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      background: white;
      border-radius: 8px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
      padding: 15px 20px;
      z-index: 3000;
      transform: translateX(120%);
      transition: transform 0.3s ease-out;
      display: flex;
      align-items: center;
      border-left: 5px solid;
    }
    
    .notification.success {
      border-left-color: #2ecc71;
    }
    
    .notification.error {
      border-left-color: #e74c3c;
    }
    
    .notification.show {
      transform: translateX(0);
    }
    
    .notification.hide {
      transform: translateX(120%);
    }
    
    .notification-content {
      display: flex;
      align-items: center;
    }
    
    .notification-content i {
      font-size: 1.5rem;
      margin-right: 15px;
    }
    
    .notification.success i {
      color: #2ecc71;
    }
    
    .notification.error i {
      color: #e74c3c;
    }
    
    /* ปรับปรุงสไตล์สำหรับประวัติการสั่งซื้อ */
    .order-item {
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.08);
      margin-bottom: 20px;
      overflow: hidden;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      border-left: 4px solid #3498db;
    }
    
    .order-item:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(0,0,0,0.12);
    }
    
    .order-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 20px;
      background: #f8fafc;
      border-bottom: 1px solid #eee;
      flex-wrap: wrap;
      gap: 10px;
    }
    
    .order-id {
      font-weight: bold;
      color: #3498db;
      font-size: 1.1rem;
    }
    
    .order-date {
      color: #777;
      font-size: 0.9rem;
    }
    
    .order-status {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 0.85rem;
      font-weight: 500;
    }
    
    .status-pending {
      background: #fff3cd;
      color: #856404;
    }
    
    .status-processing {
      background: #cce5ff;
      color: #004085;
    }
    
    .status-shipped {
      background: #d4edda;
      color: #155724;
    }
    
    .status-delivered {
      background: #d1ecf1;
      color: #0c5460;
    }
    
    .status-cancelled {
      background: #f8d7da;
      color: #721c24;
    }
    
    .order-details {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      padding: 20px;
    }
    
    .order-products {
      flex: 2;
      min-width: 300px;
    }
    
    .order-summary {
      flex: 1;
      min-width: 250px;
      border-left: 1px solid #eee;
      padding-left: 20px;
    }
    
    .order-product-item {
      display: flex;
      padding: 12px 0;
      border-bottom: 1px solid #f5f5f5;
      align-items: center;
    }
    
    .order-product-item:last-child {
      border-bottom: none;
    }
    
    .order-product-item img {
      width: 60px;
      height: 60px;
      object-fit: contain;
      border-radius: 8px;
      margin-right: 15px;
      background: #f8f9fa;
      padding: 5px;
    }
    
    .order-product-details {
      flex: 1;
    }
    
    .order-product-title {
      font-weight: bold;
      margin-bottom: 5px;
      color: #2c3e50;
    }
    
    .order-product-prescription {
      color: #666;
      font-size: 0.85rem;
      margin-bottom: 5px;
    }
    
    .order-product-price {
      color: #2ecc71;
      font-weight: bold;
      font-size: 0.95rem;
    }
    
    .order-summary-title {
      font-weight: 600;
      margin-bottom: 15px;
      color: #2c3e50;
      border-bottom: 1px solid #eee;
      padding-bottom: 8px;
    }
    
    .order-summary-row {
      display: flex;
      justify-content: space-between;
      margin-bottom: 8px;
      font-size: 0.95rem;
    }
    
    .order-total {
      font-weight: bold;
      font-size: 1.1rem;
      border-top: 1px solid #eee;
      padding-top: 10px;
      margin-top: 10px;
    }
    
    .order-address {
      margin-top: 15px;
      padding-top: 15px;
      border-top: 1px solid #eee;
    }
    
    .order-address-title {
      font-weight: 600;
      margin-bottom: 8px;
      color: #2c3e50;
    }
    
    .address-details {
      font-size: 0.9rem;
      line-height: 1.5;
      color: #555;
    }
    
    .order-actions {
      display: flex;
      justify-content: flex-end;
      padding: 15px 20px;
      background: #f8fafc;
      border-top: 1px solid #eee;
      gap: 10px;
    }
    
    .order-action-btn {
      padding: 8px 15px;
      border-radius: 6px;
      font-size: 0.9rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 6px;
      transition: all 0.2s;
    }
    
    .view-details {
      background: #3498db;
      color: white;
      border: none;
    }
    
    .view-details:hover {
      background: #2980b9;
    }
    
    .reorder {
      background: #2ecc71;
      color: white;
      border: none;
    }
    
    .reorder:hover {
      background: #27ae60;
    }
    
    .pagination {
      display: flex;
      justify-content: center;
      padding: 20px;
      gap: 8px;
      border-top: 1px solid #eee;
    }
    
    .page-btn {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      border: 1px solid #ddd;
      background: white;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .page-btn.active {
      background: #3498db;
      color: white;
      border-color: #3498db;
    }
    
    .page-btn:hover:not(.active) {
      background: #f0f8ff;
    }
    
    .empty-orders {
      text-align: center;
      padding: 40px 20px;
      color: #777;
      grid-column: 1 / -1;
    }
    
    .empty-orders i {
      font-size: 3.5rem;
      color: #bdc3c7;
      margin-bottom: 15px;
    }
    
    /* Responsive styles */
    @media (max-width: 768px) {
      .order-details {
        flex-direction: column;
      }
      
      .order-summary {
        border-left: none;
        border-top: 1px solid #eee;
        padding-left: 0;
        padding-top: 20px;
      }
      
      .order-header {
        flex-direction: column;
        align-items: flex-start;
      }
      
      .order-controls {
        flex-direction: column;
      }
      
      .filter-group {
        min-width: 100%;
      }
    }
    
    @media (max-width: 480px) {
      .order-product-item {
        flex-direction: column;
        align-items: flex-start;
      }
      
      .order-product-item img {
        margin-bottom: 10px;
      }
      
      .order-actions {
        flex-direction: column;
      }
      
      .order-action-btn {
        width: 100%;
        justify-content: center;
      }
    }
    
  .delete-order {
    background: #e74c3c;
    color: white;
    border: none;
    display: flex;
    align-items: center;
    gap: 6px;
    transition: all 0.2s;
  }
  
  .delete-order:hover {
    background: #c0392b;
    transform: scale(1.05);
  }
  
  .delete-order:active {
    transform: scale(0.95);
  }
  
  /* ปรับระยะห่างของปุ่มใน order-actions */
  .order-actions {
    gap: 10px;
  }
  
  /* Responsive styles */
  @media (max-width: 768px) {
    .order-actions {
      flex-direction: row;
      flex-wrap: wrap;
    }
    
    .order-action-btn {
      padding: 8px 12px;
      font-size: 0.85rem;
    }
  }
  
  @media (max-width: 480px) {
    .order-actions {
      flex-direction: column;
    }
    
    .order-action-btn {
      width: 100%;
      justify-content: center;
    }
  }
  .success-message {
      background-color: #d4edda;
      color: #155724;
      padding: 15px;
      border-radius: 5px;
      margin-bottom: 20px;
      text-align: center;
      display: none;
    }
  </style>
</head>

<body>
<div class="overlay" id="overlay" onclick="toggleMobileMenu()"></div> 
  <div class="navbar">
    <div class="navbar-left" onclick="goHome()">
      <span><img src="images/logo.png" style="background-color: #ffffff;height: 100px; width: auto;border-radius: 35px;box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);"></span>
    </div>
    <div class="nav-links">
      <a href="#" class="nav-item" onclick="goHome()">หน้าแรก</a>
      <a href="#" class="nav-item" onclick="viewProduct()">สินค้า</a>
      <a href="#" class="nav-item" onclick="viewHowtouse()">วิธีใช้งาน</a>
      <a href="#" class="nav-item" onclick="viewAboutus()">เกี่ยวกับเรา</a>
    </div>
    <div class="nav-buttons">
      <div class="profile" onclick="toggleDropdown(event)">
        <div class="username-display">
          <i class="fas fa-user"></i>
          <span class="username-text" id="usernameDisplay">ล็อกอิน</span>
        </div>
        <div class="dropdown-menu" id="dropdownMenu">
          <div class="dropdown-header">
            <i class="fas fa-user-circle"></i>
            <div>
              <div class="dropdown-username" id="dropdownUsername">ผู้ใช้งาน</div>
              <div class="dropdown-email" id="dropdownEmail">example@email.com</div>
            </div>
          </div>
          <a href="#" onclick="setAccount()"><i class="fas fa-user-cog"></i> จัดการบัญชี</a>
          <a href="#" onclick="openOrderHistoryModal()"><i class="fas fa-list"></i> ประวัติการสั่งซื้อ</a>
          <a href="#" onclick="logout()"><i class="fas fa-sign-out-alt"></i> ออกจากระบบ</a>
        </div>
      </div>
      
      <button class="btn" onclick="openCartModal()">
        <i class="fas fa-shopping-cart"></i>
        <span id="cartBadge" class="cart-badge">0</span>
      </button>
      
      <div class="hamburger" id="hamburger" onclick="toggleMobileMenu()">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
  </div>

  <div class="mobile-menu" id="mobileMenu">
      <a href="#" class="nav-item" onclick="goHome()">หน้าแรก</a>
      <a href="#" class="nav-item" onclick="viewProduct()">สินค้า</a>
      <a href="#" class="nav-item" onclick="viewHowtouse()">วิธีใช้งาน</a>
      <a href="#" class="nav-item" onclick="viewAboutus()">เกี่ยวกับเรา</a>
  </div>
  
<section class="banner">
  <div class="container">
    <div class="banner-content">
      <div class="banner-image">
        <img src="images/banner1.png" alt="Alice Moist Daily">
      </div>
      <div class="banner-text">
        <h1>Alice Moist Daily เลนส์สัมผัสรายวันคุณภาพสูง</h1>
        <p>สัมผัสความสบายตาตลอดวันด้วยเลนส์สัมผัสที่อ่อนโยนและชุ่มชื่น</p>
      </div>
    </div>
  </div>
</section>

<main class="container">
    <section class="product-section">
        <div class="product-image">
            <img src="images/product1.png" alt="Alice Moist Daily Contact Lenses" style="height: 300px; width: auto; ">
        </div>
        <div class="product-details">
            <h1 class="product-title">Alice Moist Daily เลนส์สัมผัสรายวัน</h1>
            <p class="product-subtitle">ความสบายตาระดับพรีเมียมในราคาประหยัด</p>
            
            <div class="price">
                เริ่มต้นเพียง 35¢ ต่อชิ้น* <br>
                <small>*12.50 USD ต่อกล่อง (เลนส์รายวัน 12 กล่อง)</small>
            </div>
            
            <div class="shipping-notice">
                <i class="fas fa-truck"></i> ส่งฟรีทุกออเดอร์
            </div>
            
            <div class="prescription-selection">
                <h3>เลือกค่าสายตา</h3>
                
                <div class="eye-selection">
                    <div class="eye-option">
                        <button id="rightEyeBtn" class="eye-btn">
                            <i class="fas fa-eye"></i> เลือกตาขวา
                        </button>
                        <div id="rightEyeValue" class="selected-value">
                            เลือกแล้ว: <span id="rightEyeSelected">ยังไม่ได้เลือก</span>
                        </div>
                    </div>
                    
                    <div class="eye-option">
                        <button id="leftEyeBtn" class="eye-btn">
                            <i class="fas fa-eye"></i> เลือกตาซ้าย
                        </button>
                        <div id="leftEyeValue" class="selected-value">
                            เลือกแล้ว: <span id="leftEyeSelected">ยังไม่ได้เลือก</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="summary">
                <div class="total-price">
                    ยอดรวม: <span id="totalPrice">XXX บาท</span>
                </div>
                
                <div class="action-buttons">
                    <button class="add-to-cart" onclick="addToCart()">
                        <i class="fas fa-shopping-cart"></i> เพิ่มในตะกร้า
                    </button>
                    <button class="buy-now" onclick="buyNow()">
                        <i class="fas fa-bolt"></i> สั่งซื้อทันที
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Modal สำหรับเลือกค่าสายตา -->
    <div id="prescriptionModal" class="modal">
      <div class="modal-content">
        <span class="close-btn">&times;</span>
        <h2 id="modalTitle">เลือกค่าสายตา</h2>
        
        <div class="prescription-type">
          <button id="minusBtn" class="active">MINUS (-)</button>
          <button id="plusBtn">PLUS (+)</button>
        </div>
        
        <div id="minusPrescription" class="prescription-section">
          <h3>ค่าสายตาสั้น</h3>
          <table class="prescription-grid">
            <tr>
              <td>0.00</td><td>-1.00</td><td>-2.00</td><td>-3.00</td>
            </tr>
            <tr>
              <td>-0.25</td><td>-1.25</td><td>-2.25</td><td>-3.25</td>
            </tr>
            <tr>
              <td>-0.50</td><td>-1.50</td><td>-2.50</td><td>-3.50</td>
            </tr>
            <tr>
              <td>-0.75</td><td>-1.75</td><td>-2.75</td><td>-3.75</td>
            </tr>
          </table>
        </div>
        
        <div id="plusPrescription" class="prescription-section" style="display:none">
          <h3>ค่าสายตายาว</h3>
          <table class="prescription-grid">
            <tr>
              <td>+0.00</td><td>+1.00</td><td>+2.00</td><td>+3.00</td>
            </tr>
            <tr>
              <td>+0.25</td><td>+1.25</td><td>+2.25</td><td>+3.25</td>
            </tr>
            <tr>
              <td>+0.50</td><td>+1.50</td><td>+2.50</td><td>+3.50</td>
            </tr>
            <tr>
              <td>+0.75</td><td>+1.75</td><td>+2.75</td><td>+3.75</td>
            </tr>
          </table>
        </div>
        
        <div class="current-selection">
          <p>ค่าที่เลือก: <span id="currentSelection">ยังไม่ได้เลือก</span></p>
        </div>
        
        <button id="confirmSelection" class="confirm-btn">ยืนยันการเลือก</button>
      </div>
    </div>

    <!-- Modal สำหรับตะกร้าสินค้า -->
    <div id="cartModal" class="cart-modal">
      <div class="cart-content">
        <div class="cart-header">
          <h2>ตะกร้าสินค้า</h2>
          <span class="close-btn" onclick="closeCartModal()">&times;</span>
        </div>
        
        <div id="cartItemsContainer" class="cart-items">
          <!-- รายการสินค้าจะแสดงที่นี่ -->
        </div>
        
        <div class="login-alert" id="loginAlert">
          <i class="fas fa-exclamation-triangle"></i>
          คุณต้องล็อกอินก่อนดำเนินการชำระเงิน
        </div>
        
        <div class="cart-summary">
          <div class="cart-total">
            <span>ยอดรวมทั้งหมด:</span>
            <span id="cartTotalPrice">0 บาท</span>
          </div>
          <div class="cart-actions">
            <button class="continue-shopping" onclick="closeCartModal()">ดำเนินการต่อ</button>
            <button class="checkout" onclick="checkout()">ชำระเงิน</button>
          </div>
        </div>
      </div>
    </div>

    <!-- เพิ่มโมดอลสำหรับล็อกอิน/สมัครสมาชิก -->
    <div class="auth-modal" id="authModal">
      <div class="auth-container">
        <div class="auth-header">
          <h2>เข้าสู่ระบบ / สมัครสมาชิก</h2>
          <div class="auth-close" onclick="closeAuthModal()">
            <i class="fas fa-times"></i>
          </div>
        </div>
        
        <div class="auth-tabs">
          <div class="auth-tab active" data-tab="login">เข้าสู่ระบบ</div>
          <div class="auth-tab" data-tab="register">สมัครสมาชิก</div>
        </div>
        
        <div class="auth-content">
          <!-- ฟอร์มล็อกอิน -->
          <form id="loginForm" class="auth-form active">
            <div class="auth-form-group">
              <label for="authEmail">อีเมล</label>
              <input type="email" id="authEmail" required>
              <div id="emailError" class="auth-error"></div>
            </div>
            
            <div class="auth-form-group">
              <label for="authPassword">รหัสผ่าน</label>
              <input type="password" id="authPassword" required>
              <div id="passwordError" class="auth-error"></div>
            </div>
            
            <button type="button" class="auth-btn" onclick="loginUser()">
              <i class="fas fa-sign-in-alt"></i> เข้าสู่ระบบ
            </button>
            
            <div class="auth-footer">
              ลืมรหัสผ่าน? <a href="#" onclick="resetPassword()">รีเซ็ตรหัสผ่าน</a>
            </div>
          </form>
          
          <!-- ฟอร์มสมัครสมาชิก -->
          <form id="registerForm" class="auth-form">
            <div class="auth-form-group">
              <label for="regUsername">ชื่อผู้ใช้</label>
              <input type="text" id="regUsername" required>
              <div id="usernameError" class="auth-error"></div>
            </div>
            
            <div class="auth-form-group">
              <label for="regEmail">อีเมล</label>
              <input type="email" id="regEmail" required>
              <div id="regEmailError" class="auth-error"></div>
            </div>
            
            <div class="auth-form-group">
              <label for="regPassword">รหัสผ่าน</label>
              <input type="password" id="regPassword" required>
              <div id="regPasswordError" class="auth-error"></div>
            </div>
            
            <div class="auth-form-group">
              <label for="regConfirmPassword">ยืนยันรหัสผ่าน</label>
              <input type="password" id="regConfirmPassword" required>
              <div id="confirmPasswordError" class="auth-error"></div>
            </div>
            
            <button type="button" class="auth-btn" onclick="registerUser()">
              <i class="fas fa-user-plus"></i> สมัครสมาชิก
            </button>
            
            <div class="auth-footer">
              มีบัญชีอยู่แล้ว? <a href="#" onclick="switchToLogin()">เข้าสู่ระบบ</a>
            </div>
          </form>
        </div>
      </div>
    </div>
 <div id="orderHistoryModal" class="modal">
    <div class="modal-content order-history-modal">
      <span class="close-btn" onclick="closeOrderHistoryModal()">&times;</span>
      <div class="order-history-header">
        <h2 class="order-history-title">
          <i class="fas fa-history"></i> ประวัติการสั่งซื้อ
        </h2>
      </div>
      
      <div class="order-history-controls">
        <div class="filter-group">
          <label for="statusFilter"><i class="fas fa-filter"></i> กรองตามสถานะ</label>
          <select id="statusFilter" class="filter-select" onchange="filterOrders()">
            <option value="all">ทั้งหมด</option>
            <option value="pending">รอดำเนินการ</option>
            <option value="processing">กำลังเตรียมสินค้า</option>
            <option value="shipped">จัดส่งแล้ว</option>
            <option value="delivered">จัดส่งสำเร็จ</option>
            <option value="cancelled">ยกเลิก</option>
          </select>
        </div>
        
        <div class="filter-group">
          <label for="sortOrder"><i class="fas fa-sort"></i> เรียงตาม</label>
          <select id="sortOrder" class="filter-select" onchange="sortOrders()">
            <option value="newest">ใหม่ล่าสุด</option>
            <option value="oldest">เก่าที่สุด</option>
            <option value="price-high">ราคาสูงสุด</option>
            <option value="price-low">ราคาต่ำสุด</option>
          </select>
        </div>
        
        <div class="filter-group">
          <label for="orderSearch"><i class="fas fa-search"></i> ค้นหาคำสั่งซื้อ</label>
          <div class="search-input">
            <input type="text" id="orderSearch" placeholder="ค้นหาด้วยรหัสคำสั่งซื้อ...">
            <button onclick="searchOrders()"><i class="fas fa-search"></i></button>
          </div>
        </div>
      </div>
      
      <div id="orderHistoryContainer" class="order-history-container">
        <!-- รายการประวัติการสั่งซื้อจะแสดงที่นี่ -->
      </div>
      
      <div class="pagination" id="pagination">
        <!-- ปุ่ม pagination จะถูกสร้างโดย JavaScript -->
      </div>
    </div>
  </div>
    <section class="product-info">
        <div class="container">
            <h2>Alice Moist Daily เลนส์สัมผัสรายวัน</h2>
            <p>เลนส์ Alice Moist Daily บรรจุในน้ำยาเกลือแร่ที่ช่วยเพิ่มความชุ่มชื่นและความสบายตาตลอดวัน</p>
            
            <div class="info-boxes">
                <div class="whats-included">
                    <h3><i class="fas fa-box-open"></i> สิ่งที่คุณจะได้รับในแต่ละกล่อง:</h3>
                    <ul>
                        <li>เลนส์สัมผัสรายวัน Alice Moist Daily (HEMA+GMMA 58%)</li>
                        <li>น้ำยาเกลือแร่สำหรับแช่เลนส์</li>
                        <li>คู่มือการใช้งาน</li>
                        <li>กล่องบรรจุภัณฑ์คุณภาพ</li>
                    </ul>
                </div>
                
                <div class="how-to-use">
                    <h3><i class="fas fa-question-circle"></i> วิธีการใช้งาน:</h3>
                    <ol>
                        <li>ล้างมือให้สะอาดก่อนสัมผัสเลนส์</li>
                        <li>นำเลนส์ออกจากบรรจุภัณฑ์</li>
                        <li>ใส่เลนส์ตามวิธีที่แนะนำ</li>
                        <li>ทิ้งเลนส์หลังใช้แล้ววันเดียว</li>
                        <li>ทำความสะอาดที่เก็บเลนส์เป็นประจำ</li>
                    </ol>
                </div>
            </div>
        </div>
    </section>
</main>

<footer>
    <div class="container footer-container">
        <div class="footer-section">
            <h3>เกี่ยวกับเรา</h3>
            <p>Alice Moist Daily นำเข้าและจัดจำหน่ายเลนส์สัมผัสรายวันคุณภาพสูง</p>
            <div class="social-links">
                <a href="#"><i class="fab fa-facebook"></i></a>
                <a href="#"><i class="fab fa-line"></i></a>
                <a href="#"><i class="fab fa-instagram"></i></a>
            </div>
        </div>
        
        <div class="footer-section contact-info">
            <h3>ติดต่อเรา</h3>
            <ul>
                <li><i class="fas fa-envelope"></i> Email: contact@alicemoist.com</li>
                <li><i class="fab fa-line"></i> Line: @alicemoist</li>
                <li><i class="fab fa-facebook"></i> Facebook: Alice Moist Thailand</li>
                <li><i class="fas fa-phone"></i> โทร: 02-XXX-XXXX</li>
            </ul>
        </div>
        
        <div class="footer-section">
            <h3>ช่องทางการชำระเงิน</h3>
            <div class="payment-methods">
                <i class="fab fa-cc-visa"></i>
                <i class="fab fa-cc-mastercard"></i>
                <i class="fas fa-qrcode"></i>
            </div>
        </div>
    </div>
    
    <div class="copyright">
        © 2023 Alice Moist Thailand. All rights reserved.
    </div>
</footer>

<script>
  // ตัวแปรสำหรับระบบตะกร้าสินค้า
  let cart = JSON.parse(localStorage.getItem('cart')) || [];
  const cartBadge = document.getElementById('cartBadge');
  
  // ฟังก์ชันสำหรับตะกร้าสินค้า
  function addToCart() {
    if (rightEyeSelected.textContent === 'ยังไม่ได้เลือก' || 
        leftEyeSelected.textContent === 'ยังไม่ได้เลือก') {
      showNotification('กรุณาเลือกค่าสายตาทั้งสองข้างก่อน');
      return;
    }
    
    // สร้างสินค้า
    const newProduct = {
      id: Date.now(),
      name: 'Alice Moist Daily เลนส์สัมผัสรายวัน',
      price: 450,
      image: 'images/product1.png',
      rightEye: rightEyeSelected.textContent,
      leftEye: leftEyeSelected.textContent,
      quantity: 1,
      timestamp: new Date().toISOString()
    };
    
    // ตรวจสอบว่ามีสินค้าซ้ำในตะกร้าหรือไม่
    const existingItemIndex = cart.findIndex(item => 
      item.name === newProduct.name &&
      item.rightEye === newProduct.rightEye &&
      item.leftEye === newProduct.leftEye
    );
    
    if (existingItemIndex !== -1) {
      // เพิ่มจำนวนสินค้าที่มีอยู่
      cart[existingItemIndex].quantity += 1;
    } else {
      // เพิ่มรายการใหม่
      cart.push(newProduct);
    }
    
    localStorage.setItem('cart', JSON.stringify(cart));
    
    // อัพเดทจำนวนสินค้าในตะกร้า
    updateCartBadge();
    
    // แจ้งเตือน
    showNotification('เพิ่มสินค้าในตะกร้าเรียบร้อยแล้ว', 'success');
  }
  
  // ฟังก์ชันเพิ่ม/ลดจำนวนสินค้า
  function updateQuantity(itemId, change) {
    const itemIndex = cart.findIndex(item => item.id === itemId);
    
    if (itemIndex !== -1) {
      cart[itemIndex].quantity += change;
      
      // ตรวจสอบว่าจำนวนไม่ต่ำกว่า 1
      if (cart[itemIndex].quantity < 1) {
        cart[itemIndex].quantity = 1;
      }
      
      localStorage.setItem('cart', JSON.stringify(cart));
      openCartModal(); // รีเฟรชตะกร้า
    }
  }
  
  function updateCartBadge() {
    // แสดงจำนวนชิ้นสินค้าทั้งหมดใน badge
    const totalItems = cart.reduce((total, item) => total + item.quantity, 0);
    cartBadge.textContent = totalItems;
  }
  
  function buyNow() {
    if (rightEyeSelected.textContent === 'ยังไม่ได้เลือก' || 
        leftEyeSelected.textContent === 'ยังไม่ได้เลือก') {
      showNotification('กรุณาเลือกค่าสายตาทั้งสองข้างก่อน');
      return;
    }
    
    // เพิ่มลงตะกร้า
    addToCart();
    
    // เปิดตะกร้าเพื่อชำระเงิน
    openCartModal();
  }
  
  function openCartModal() {
    const cartModal = document.getElementById('cartModal');
    const cartItemsContainer = document.getElementById('cartItemsContainer');
    const cartTotalPrice = document.getElementById('cartTotalPrice');
    const loginAlert = document.getElementById('loginAlert');
    
    // ล้างรายการสินค้าเก่า
    cartItemsContainer.innerHTML = '';
    
    // คำนวณยอดรวม
    let total = 0;
    
    if (cart.length === 0) {
      cartItemsContainer.innerHTML = `
        <div class="empty-cart">
          <i class="fas fa-shopping-cart"></i>
          <h3>ไม่มีสินค้าในตะกร้า</h3>
          <p>กรุณาเพิ่มสินค้าในตะกร้าก่อน</p>
        </div>
      `;
      cartTotalPrice.textContent = '0 บาท';
      loginAlert.style.display = 'none';
    } else {
      // เพิ่มสินค้าแต่ละรายการ
      cart.forEach(item => {
        const itemTotal = item.price * item.quantity;
        total += itemTotal;
        
        const cartItem = document.createElement('div');
        cartItem.className = 'cart-item';
        cartItem.innerHTML = `
          <img src="${item.image}" alt="${item.name}">
          <div class="cart-item-details">
            <div class="cart-item-title">${item.name}</div>
            <div class="cart-item-prescription">
              ตาขวา: ${item.rightEye || 'N/A'}, ตาซ้าย: ${item.leftEye || 'N/A'}
            </div>
            <div class="cart-item-price">${item.price} บาท × ${item.quantity} = ${itemTotal} บาท</div>
            <div class="quantity-controls">
              <button class="quantity-btn minus" onclick="updateQuantity(${item.id}, -1)">
                <i class="fas fa-minus"></i>
              </button>
              <span class="quantity-display">${item.quantity}</span>
              <button class="quantity-btn plus" onclick="updateQuantity(${item.id}, 1)">
                <i class="fas fa-plus"></i>
              </button>
            </div>
          </div>
          <div class="cart-item-actions">
            <button class="cart-item-remove" onclick="removeFromCart(${item.id})">
              <i class="fas fa-trash"></i>
            </button>
          </div>
        `;
        
        cartItemsContainer.appendChild(cartItem);
      });
      
      cartTotalPrice.textContent = `${total} บาท`;
      loginAlert.style.display = localStorage.getItem('registeredUsername') ? 'none' : 'block';
    }
    
    // แสดงตะกร้า
    cartModal.style.display = 'block';
  }
  
  function closeCartModal() {
    document.getElementById('cartModal').style.display = 'none';
  }
  
  function removeFromCart(id) {
    // ค้นหาดัชนีของสินค้า
    const index = cart.findIndex(item => item.id === parseInt(id));
    
    if (index !== -1) {
      // ลบสินค้าออกจากตะกร้า
      cart.splice(index, 1);
      localStorage.setItem('cart', JSON.stringify(cart));
      
      // อัพเดทตะกร้า
      openCartModal();
      updateCartBadge();
    }
  }
  
  function checkout() {
    if (cart.length === 0) {
      showNotification('ไม่มีสินค้าในตะกร้า', 'error');
      return;
    }
    
    // ตรวจสอบว่าล็อกอินแล้วหรือไม่
    const username = localStorage.getItem('registeredUsername');
    
    if (!username) {
      // ยังไม่ได้ล็อกอิน
      closeCartModal();
      openAuthModal('login');
      showNotification('กรุณาล็อกอินก่อนดำเนินการชำระเงิน', 'error');
    } else {
      // ล็อกอินแล้ว
      showNotification('กำลังนำคุณไปยังหน้าชำระเงิน', 'success');
      setTimeout(() => {
        window.location.href = "buyer-checkout.html";
      }, 1500);
    }
  }
  
  // ตัวแปรสำหรับระบบเลือกค่าสายตา
  let currentEye = ''; 
  let selectedValue = '';
  
  const rightEyeBtn = document.getElementById('rightEyeBtn');
  const leftEyeBtn = document.getElementById('leftEyeBtn');
  const rightEyeSelected = document.getElementById('rightEyeSelected');
  const leftEyeSelected = document.getElementById('leftEyeSelected');
  const rightEyeValue = document.getElementById('rightEyeValue');
  const leftEyeValue = document.getElementById('leftEyeValue');
  const modal = document.getElementById('prescriptionModal');
  const closeBtn = document.querySelector('.close-btn');
  const modalTitle = document.getElementById('modalTitle');
  const minusBtn = document.getElementById('minusBtn');
  const plusBtn = document.getElementById('plusBtn');
  const minusPrescription = document.getElementById('minusPrescription');
  const plusPrescription = document.getElementById('plusPrescription');
  const currentSelection = document.getElementById('currentSelection');
  const confirmSelection = document.getElementById('confirmSelection');
  const totalPriceElement = document.getElementById('totalPrice');
  
  // ตัวแปรสำหรับระบบผู้ใช้งาน
  const username = localStorage.getItem("registeredUsername");
  const email = localStorage.getItem("registeredEmail") || "example@email.com";
  
  const usernameDisplay = document.getElementById("usernameDisplay");
  const dropdownUsername = document.getElementById("dropdownUsername");
  const dropdownEmail = document.getElementById("dropdownEmail");
  const dropdown = document.getElementById("dropdownMenu");
  const hamburger = document.getElementById("hamburger");
  const mobileMenu = document.getElementById("mobileMenu");
  const overlay = document.getElementById("overlay");
  
  // อัพเดทตะกร้าเมื่อโหลดหน้า
  updateCartBadge();
  
  // แสดงชื่อผู้ใช้งานถ้ามี
  if (username) {
    usernameDisplay.textContent = username;
    dropdownUsername.textContent = username;
    dropdownEmail.textContent = email;
  }
  
  function toggleDropdown(event) {
    event.stopPropagation();
    const username = localStorage.getItem('registeredUsername');
    const dropdown = document.getElementById('dropdownMenu');
     if (!username) {
      openAuthModal('login');
      return;
    }
    dropdown.classList.toggle("show");
  }
  
  document.addEventListener("click", function (event) {
    if (!event.target.closest(".profile")) {
      dropdown.classList.remove("show");
    }
  });
  
  function toggleMobileMenu() {
    hamburger.classList.toggle("active");
    mobileMenu.classList.toggle("show");
    overlay.classList.toggle("show");
  }
  
  function logout() {
    // ลบข้อมูลการล็อกอิน
    localStorage.removeItem('isLoggedIn');
    localStorage.removeItem('registeredUsername');
    localStorage.removeItem('registeredEmail');
    localStorage.removeItem('registeredPassword');
    
    // ล้างตะกร้าสินค้า
    localStorage.removeItem('cart');
    cart = [];
    updateCartBadge();
    
    const dropdown = document.getElementById('dropdownMenu');
    dropdown.classList.remove('show');

    // แจ้งเตือน
    showNotification('ออกจากระบบสำเร็จ', 'success');
    
    // อัพเดท UI
    updateUserUI();
  }
  
  function setAccount() {
    window.location.href = "buyer-setting.html";
  }
  
  function viewAboutus() {
    window.location.href = "buyer-aboutus.html";
  }
  
  function viewHowtouse() {
    window.location.href = "buyer-howtouse.html";
  }
  
  function viewProduct() {
    window.location.href = "buyer-products.html";
  }
  
  function viewCart() {
    openCartModal();
  }
  
  function goHome() {
    window.location.href = "buyer-dashboard.html";
  }
  
  // เปิด Modal สำหรับตาขวา
  rightEyeBtn.addEventListener('click', function() {
    currentEye = 'right';
    modalTitle.textContent = 'เลือกค่าสายตา - ตาขวา';
    modal.style.display = 'block';
    selectedValue = rightEyeSelected.textContent === 'ยังไม่ได้เลือก' ? '' : rightEyeSelected.textContent;
    updateSelectionDisplay();
  });
  
  // เปิด Modal สำหรับตาซ้าย
  leftEyeBtn.addEventListener('click', function() {
    currentEye = 'left';
    modalTitle.textContent = 'เลือกค่าสายตา - ตาซ้าย';
    modal.style.display = 'block';
    selectedValue = leftEyeSelected.textContent === 'ยังไม่ได้เลือก' ? '' : leftEyeSelected.textContent;
    updateSelectionDisplay();
  });
  
  // ปิด Modal
  closeBtn.addEventListener('click', function() {
    modal.style.display = 'none';
  });
  
  // คลิกนอก Modal เพื่อปิด
  window.addEventListener('click', function(event) {
    if (event.target === modal) {
      modal.style.display = 'none';
    }
    if (event.target.classList.contains('cart-modal')) {
      closeCartModal();
    }
    if (event.target.classList.contains('auth-modal')) {
      closeAuthModal();
    }
    if (event.target.classList.contains('modal')) {
      closeOrderHistoryModal();
    }
  });
  
  // สลับระหว่าง MINUS และ PLUS
  minusBtn.addEventListener('click', function() {
    minusBtn.classList.add('active');
    plusBtn.classList.remove('active');
    minusPrescription.style.display = 'block';
    plusPrescription.style.display = 'none';
  });
  
  plusBtn.addEventListener('click', function() {
    plusBtn.classList.add('active');
    minusBtn.classList.remove('active');
    minusPrescription.style.display = 'none';
    plusPrescription.style.display = 'block';
  });
  
  // เลือกค่าสายตา
  document.querySelectorAll('.prescription-grid td').forEach(cell => {
    cell.addEventListener('click', function() {
      selectedValue = this.textContent;
      updateSelectionDisplay();
    });
  });
  
  // ยืนยันการเลือก
  confirmSelection.addEventListener('click', function() {
    if (selectedValue) {
      if (currentEye === 'right') {
        rightEyeSelected.textContent = selectedValue;
        rightEyeValue.style.display = 'block';
      } else {
        leftEyeSelected.textContent = selectedValue;
        leftEyeValue.style.display = 'block';
      }
      modal.style.display = 'none';
      calculateTotal();
    } else {
      showNotification('กรุณาเลือกค่าสายตาก่อน', 'error');
    }
  });
  
  // อัพเดทการแสดงผลค่าที่เลือกใน Modal
  function updateSelectionDisplay() {
    if (selectedValue) {
      currentSelection.textContent = selectedValue;
    } else {
      currentSelection.textContent = 'ยังไม่ได้เลือก';
    }
  }
  
  // คำนวณราคารวม
  function calculateTotal() {
    if (rightEyeSelected.textContent !== 'ยังไม่ได้เลือก' && 
        leftEyeSelected.textContent !== 'ยังไม่ได้เลือก') {
      totalPriceElement.textContent = '450 บาท';
    } else {
      totalPriceElement.textContent = 'XXX บาท';
    }
  }
  
  // ฟังก์ชันสำหรับระบบล็อกอิน/สมัครสมาชิกแบบโมดอล
  function openAuthModal(tab = 'login') {
    const modal = document.getElementById('authModal');
    modal.classList.add('show');
    
    // ซ่อนฟอร์มทั้งหมด
    document.querySelectorAll('.auth-form').forEach(form => {
      form.classList.remove('active');
    });
    
    // เปิดฟอร์มที่เลือก
    if (tab === 'login') {
      document.getElementById('loginForm').classList.add('active');
      
      // ตั้งค่าตำแหน่งแท็บ
      document.querySelectorAll('.auth-tab').forEach(tab => {
        tab.classList.remove('active');
        if (tab.dataset.tab === 'login') {
          tab.classList.add('active');
        }
      });
    } else {
      document.getElementById('registerForm').classList.add('active');
      
      // ตั้งค่าตำแหน่งแท็บ
      document.querySelectorAll('.auth-tab').forEach(tab => {
        tab.classList.remove('active');
        if (tab.dataset.tab === 'register') {
          tab.classList.add('active');
        }
      });
    }
  }
  
  function closeAuthModal() {
    document.getElementById('authModal').classList.remove('show');
    clearErrors();
  }
  
  function switchToLogin() {
    openAuthModal('login');
  }
  
  function switchToRegister() {
    openAuthModal('register');
  }
  
  function clearErrors() {
    document.querySelectorAll('.auth-error').forEach(error => {
      error.style.display = 'none';
      error.textContent = '';
    });
  }
  
  function showError(elementId, message) {
    const errorElement = document.getElementById(elementId);
    errorElement.textContent = message;
    errorElement.style.display = 'block';
  }
  
  // ฟังก์ชันล็อกอินแบบโมดอล
  function loginUser() {
    const email = document.getElementById('authEmail').value;
    const password = document.getElementById('authPassword').value;
    
    clearErrors();
    
    if (!email || !password) {
      showError('emailError', 'กรุณากรอกอีเมลและรหัสผ่าน');
      return;
    }
    
    // ตรวจสอบข้อมูลผู้ใช้
    const registeredEmail = localStorage.getItem('registeredEmail');
    const registeredPassword = localStorage.getItem('registeredPassword');
    const registeredUsername = localStorage.getItem('registeredUsername');
    
    if (email === registeredEmail && password === registeredPassword) {
      // บันทึกสถานะล็อกอิน
      localStorage.setItem('isLoggedIn', 'true');
      localStorage.setItem('registeredUsername', registeredUsername);
      
      // อัพเดท UI
      updateUserUI();
      
      // ปิดโมดอล
      closeAuthModal();
      
      // แจ้งเตือน
      showNotification('เข้าสู่ระบบสำเร็จ!', 'success');
    } else {
      showError('passwordError', 'อีเมลหรือรหัสผ่านไม่ถูกต้อง');
    }
  }
  
  // ฟังก์ชันสมัครสมาชิกแบบโมดอล
  function registerUser() {
    const username = document.getElementById('regUsername').value;
    const email = document.getElementById('regEmail').value;
    const password = document.getElementById('regPassword').value;
    const confirmPassword = document.getElementById('regConfirmPassword').value;
    
    clearErrors();
    
    // ตรวจสอบความถูกต้อง
    let hasError = false;
    
    if (!username) {
      showError('usernameError', 'กรุณากรอกชื่อผู้ใช้');
      hasError = true;
    }
    
    if (!email) {
      showError('regEmailError', 'กรุณากรอกอีเมล');
      hasError = true;
    } else {
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailRegex.test(email)) {
        showError('regEmailError', 'รูปแบบอีเมลไม่ถูกต้อง');
        hasError = true;
      }
    }
    
    if (!password) {
      showError('regPasswordError', 'กรุณากรอกรหัสผ่าน');
      hasError = true;
    } else if (password.length < 6) {
      showError('regPasswordError', 'รหัสผ่านต้องมีความยาวอย่างน้อย 6 ตัวอักษร');
      hasError = true;
    }
    
    if (!confirmPassword) {
      showError('confirmPasswordError', 'กรุณายืนยันรหัสผ่าน');
      hasError = true;
    } else if (password !== confirmPassword) {
      showError('confirmPasswordError', 'รหัสผ่านไม่ตรงกัน');
      hasError = true;
    }
    
    if (hasError) return;
    
    // บันทึกข้อมูลผู้ใช้
    localStorage.setItem('registeredUsername', username);
    localStorage.setItem('registeredEmail', email);
    localStorage.setItem('registeredPassword', password);
    
    // อัพเดท UI
    updateUserUI();
    
   const successMessage = document.createElement('div');
    successMessage.className = 'success-message';
    successMessage.innerHTML = '<i class="fas fa-check-circle"></i> สมัครสมาชิกสำเร็จ! กรุณาล็อกอินเพื่อใช้งาน';
    successMessage.style.display = 'block';
    
    // เพิ่มข้อความแจ้งเตือนก่อนฟอร์มล็อกอิน
    const loginForm = document.getElementById('loginForm');
    loginForm.parentNode.insertBefore(successMessage, loginForm);
    
    // สลับไปที่ฟอร์มล็อกอิน
    switchToLogin();
    
    // รีเซ็ตฟอร์มสมัครสมาชิก
    document.getElementById('registerForm').reset();
  }
  
  // ฟังก์ชันรีเซ็ตรหัสผ่าน
  function resetPassword() {
    const email = prompt("กรุณากรอกอีเมลที่ใช้สมัคร:");
    const registeredEmail = localStorage.getItem("registeredEmail");
    
    if (email === registeredEmail) {
      const newPassword = prompt("กรอกรหัสผ่านใหม่:");
      if (newPassword) {
        if (newPassword.length < 6) {
          showNotification('รหัสผ่านต้องมีความยาวอย่างน้อย 6 ตัวอักษร', 'error');
          return;
        }
        
        localStorage.setItem("registeredPassword", newPassword);
        showNotification('รีเซ็ตรหัสผ่านเรียบร้อยแล้ว', 'success');
      }
    } else {
      showNotification('ไม่พบอีเมลนี้ในระบบ', 'error');
    }
  }
  
  // ฟังก์ชันอัพเดท UI หลังจากล็อกอิน
  function updateUserUI() {
    const username = localStorage.getItem('registeredUsername');
    const usernameDisplay = document.getElementById('usernameDisplay');
    const dropdownUsername = document.getElementById('dropdownUsername');
    const dropdownEmail = document.getElementById('dropdownEmail');
    const dropdown = document.getElementById('dropdownMenu');
    
    if (username) {
      usernameDisplay.textContent = username;
      dropdownUsername.textContent = username;
      dropdownEmail.textContent = localStorage.getItem('registeredEmail') || 'example@email.com';
        dropdown.classList.remove('show');
    } else {
      usernameDisplay.textContent = 'ล็อกอิน';
      // ซ่อน dropdown เมื่อไม่มีผู้ใช้
      dropdown.classList.remove('show');
    }
    
    // อัพเดทจำนวนสินค้าในตะกร้า
    updateCartBadge();
  }
  
  // ฟังก์ชันแสดงการแจ้งเตือน
  function showNotification(message, type) {
    // สร้างองค์ประกอบแจ้งเตือน
    const notification = document.createElement('div');
    notification.className = `notification ${type}`;
    notification.innerHTML = `
      <div class="notification-content">
        <i class="fas ${type === 'success' ? 'fa-check-circle' : 'fa-exclamation-circle'}"></i>
        <span>${message}</span>
      </div>
    `;
    
    // เพิ่มลงใน body
    document.body.appendChild(notification);
    
    // แสดงการแจ้งเตือน
    setTimeout(() => {
      notification.classList.add('show');
    }, 100);
    
    // ตั้งเวลาให้หายไป
    setTimeout(() => {
      notification.classList.remove('show');
      notification.classList.add('hide');
      setTimeout(() => {
        document.body.removeChild(notification);
      }, 300);
    }, 1500);
  }
  
  // เพิ่มการคลิกที่แท็บ
  document.querySelectorAll('.auth-tab').forEach(tab => {
    tab.addEventListener('click', function() {
      // ลบ active จากแท็บทั้งหมด
      document.querySelectorAll('.auth-tab').forEach(t => {
        t.classList.remove('active');
      });
      
      // เพิ่ม active ให้แท็บที่คลิก
      this.classList.add('active');
      
      // ซ่อนฟอร์มทั้งหมด
      document.querySelectorAll('.auth-form').forEach(form => {
        form.classList.remove('active');
      });
      
      // แสดงฟอร์มที่ตรงกับแท็บ
      const tabId = this.dataset.tab;
      document.getElementById(`${tabId}Form`).classList.add('active');
    });
  });
  
  // อัพเดท UI เมื่อโหลดหน้า
  window.addEventListener('DOMContentLoaded', function() {
    updateUserUI();
    
    // ตรวจสอบว่ามีผู้ใช้ล็อกอินอยู่แล้วหรือไม่
    if (localStorage.getItem('isLoggedIn')) {
      updateUserUI();
    }
  });
   // ตัวแปรสำหรับระบบประวัติการสั่งซื้อ
  let orders = JSON.parse(localStorage.getItem('orderHistory')) || [];
  let filteredOrders = [];
  const ordersPerPage = 4;
  let currentPage = 1;
  
  // ฟังก์ชันเปิด modal ประวัติการสั่งซื้อ
  function openOrderHistoryModal() {
    // อ่านข้อมูลใหม่จาก localStorage ทุกครั้ง
    orders = JSON.parse(localStorage.getItem('orderHistory')) || [];
    filteredOrders = [...orders];

    const modal = document.getElementById('orderHistoryModal');
    modal.style.display = 'block';
    
    // เรียกฟังก์ชันแสดงประวัติใหม่
    displayOrderHistory();
    
    // สร้าง pagination
    generatePagination();
    
    document.body.style.overflow = 'hidden';
  }
  
  // ฟังก์ชันปิด modal
  function closeOrderHistoryModal() {
    document.getElementById('orderHistoryModal').style.display = 'none';
    
    // คืนค่าการสกรอลของ body
    document.body.style.overflow = 'auto';
  }
  
  // ฟังก์ชันกรองคำสั่งซื้อตามสถานะ
  function filterOrders() {
    const status = document.getElementById('statusFilter').value;
    
    if (status === 'all') {
      filteredOrders = [...orders];
    } else {
      filteredOrders = orders.filter(order => order.status === status);
    }
    
    currentPage = 1;
    displayOrderHistory();
    generatePagination();
  }
  
  // ฟังก์ชันเรียงลำดับคำสั่งซื้อ
  function sortOrders() {
    const sortBy = document.getElementById('sortOrder').value;
    
    filteredOrders.sort((a, b) => {
      if (sortBy === 'newest') {
        return new Date(b.date) - new Date(a.date);
      } else if (sortBy === 'oldest') {
        return new Date(a.date) - new Date(b.date);
      } else if (sortBy === 'price-high') {
        return b.total - a.total;
      } else if (sortBy === 'price-low') {
        return a.total - b.total;
      }
      return 0;
    });
    
    currentPage = 1;
    displayOrderHistory();
    generatePagination();
  }
  
  // ฟังก์ชันค้นหาคำสั่งซื้อ
  function searchOrders() {
    const searchTerm = document.getElementById('orderSearch').value.toLowerCase();
    
    if (!searchTerm) {
      filteredOrders = [...orders];
    } else {
      filteredOrders = orders.filter(order => 
        order.id.toLowerCase().includes(searchTerm) ||
        order.date.toLowerCase().includes(searchTerm)
      );
    }
    
    currentPage = 1;
    displayOrderHistory();
    generatePagination();
  }
  
  // ฟังก์ชันแสดงประวัติการสั่งซื้อ
  function displayOrderHistory() {
    const container = document.getElementById('orderHistoryContainer');
    
    // ตรวจสอบว่ามีคำสั่งซื้อหรือไม่
    if (filteredOrders.length === 0) {
      container.innerHTML = `
        <div class="empty-orders">
          <i class="fas fa-box-open"></i>
          <h3>ไม่พบประวัติการสั่งซื้อ</h3>
          <p>คุณยังไม่ได้ทำการสั่งซื้อสินค้าใด ๆ</p>
        </div>
      `;
      return;
    }
    
    // คำนวณคำสั่งซื้อที่จะแสดงในหน้าปัจจุบัน
    const startIndex = (currentPage - 1) * ordersPerPage;
    const endIndex = startIndex + ordersPerPage;
    const ordersToShow = filteredOrders.slice(startIndex, endIndex);
    
    let html = '';
    
    ordersToShow.forEach(order => {
      // สร้างรายการสินค้า
      let productsHtml = '';
      order.items.forEach(item => {
        productsHtml += `
          <div class="order-product-item">
            <img src="${item.image}" alt="${item.name}">
            <div class="order-product-details">
              <div class="order-product-title">${item.name}</div>
              <div class="order-product-prescription">
                ตาขวา: ${item.rightEye || 'N/A'}, ตาซ้าย: ${item.leftEye || 'N/A'}
              </div>
              <div class="order-product-price">
                ${item.quantity} × ${item.price} บาท = ${item.quantity * item.price} บาท
              </div>
            </div>
          </div>
        `;
      });
  
      // สร้างสถานะ
      let statusHtml = '';
      let statusClass = 'status-pending';
      let statusText = 'รอดำเนินการ';
      
      if (order.status) {
        switch(order.status) {
          case 'pending':
            statusClass = 'status-pending';
            statusText = 'รอดำเนินการ';
            break;
          case 'processing':
            statusClass = 'status-processing';
            statusText = 'กำลังเตรียมสินค้า';
            break;
          case 'shipped':
            statusClass = 'status-shipped';
            statusText = 'จัดส่งแล้ว';
            break;
          case 'delivered':
            statusClass = 'status-delivered';
            statusText = 'จัดส่งสำเร็จ';
            break;
          case 'cancelled':
            statusClass = 'status-cancelled';
            statusText = 'ยกเลิก';
            break;
        }
      } else {
        // สำหรับข้อมูลเดิมที่ไม่มีสถานะ
        const orderDate = new Date(order.date);
        const daysAgo = Math.floor((new Date() - orderDate) / (1000 * 60 * 60 * 24));
        
        if (daysAgo > 7) {
          statusClass = 'status-delivered';
          statusText = 'จัดส่งสำเร็จ';
        } else if (daysAgo > 3) {
          statusClass = 'status-shipped';
          statusText = 'จัดส่งแล้ว';
        } else if (daysAgo > 1) {
          statusClass = 'status-processing';
          statusText = 'กำลังเตรียมสินค้า';
        }
      }
      
      statusHtml = `<span class="order-status ${statusClass}"><i class="fas fa-circle"></i> ${statusText}</span>`;
      
      const paymentMethod = getPaymentMethodName(order.payment);
    
      html += `
        <div class="order-item">
          <div class="order-header">
            <div>
              <div class="order-id">คำสั่งซื้อ #${order.id}</div>
              <div class="order-date">${order.date}</div>
            </div>
            ${statusHtml}
          </div>
          
          <div class="order-details">
            <div class="order-products">
              <div class="order-summary-title">รายการสินค้า</div>
              ${productsHtml}
            </div>
            
            <div class="order-summary">
              <div class="order-summary-title">สรุปการสั่งซื้อ</div>
              <div class="order-summary-row">
                <span>ยอดรวมสินค้า:</span>
                <span>${Number(order.subtotal).toFixed(2)} บาท</span>
              </div>
              <div class="order-summary-row">
                <span>ค่าจัดส่ง:</span>
                <span>${Number(order.shippingFee).toFixed(2)} บาท</span>
              </div>
              <div class="order-summary-row">
                <span>ส่วนลด:</span>
                <span>${Number(order.discount).toFixed(2)} บาท</span>
              </div>
              <div class="order-summary-row order-total">
                <span>ยอดชำระทั้งหมด:</span>
                <span>${Number(order.total).toFixed(2)} บาท</span>
              </div>
              
              <div class="order-payment">
                <div class="order-summary-title">วิธีการชำระเงิน</div>
                <p>${paymentMethod}</p>
              </div>
              
              <div class="order-address">
                <div class="order-summary-title">ที่อยู่จัดส่ง</div>
                <div class="address-details">
                  <p>${order.address.name}</p>
                  <p>${order.address.address}, ${order.address.district}</p>
                  <p>${order.address.province} ${order.address.postalCode}</p>
                  <p>${order.address.phone}</p>
                </div>
              </div>
            </div>
          </div>
          
          <div class="order-actions">
            <button class="order-action-btn view-details" onclick="viewOrderDetails('${order.id}')">
              <i class="fas fa-eye"></i> ดูรายละเอียด
            </button>
            <button class="order-action-btn reorder" onclick="reorder('${order.id}')">
              <i class="fas fa-redo"></i> สั่งซื้ออีกครั้ง
            </button>
            <button class="order-action-btn delete-order" onclick="deleteOrder('${order.id}')">
              <i class="fas fa-trash"></i> ลบ
            </button>
          </div>
        </div>
      `;
    });
    
    container.innerHTML = html;
  }
  
  // ฟังก์ชันสร้าง pagination
  function generatePagination() {
    const pagination = document.getElementById('pagination');
    const totalPages = Math.ceil(filteredOrders.length / ordersPerPage);
    
    if (totalPages <= 1) {
      pagination.innerHTML = '';
      return;
    }
    
    let html = '';
    const maxVisiblePages = 5;
    let startPage = Math.max(1, currentPage - Math.floor(maxVisiblePages / 2));
    let endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);
    
    if (endPage - startPage < maxVisiblePages - 1) {
      startPage = Math.max(1, endPage - maxVisiblePages + 1);
    }
    
    // ปุ่มก่อนหน้า
    if (currentPage > 1) {
      html += `<div class="page-btn" onclick="changePage(${currentPage - 1})"><i class="fas fa-chevron-left"></i></div>`;
    }
    
    // ปุ่มหน้า
    for (let i = startPage; i <= endPage; i++) {
      html += `<div class="page-btn ${i === currentPage ? 'active' : ''}" onclick="changePage(${i})">${i}</div>`;
    }
    
    // ปุ่มถัดไป
    if (currentPage < totalPages) {
      html += `<div class="page-btn" onclick="changePage(${currentPage + 1})"><i class="fas fa-chevron-right"></i></div>`;
    }
    
    pagination.innerHTML = html;
  }
  
  // ฟังก์ชันเปลี่ยนหน้า
  function changePage(page) {
    currentPage = page;
    displayOrderHistory();
    generatePagination();
    document.getElementById('orderHistoryContainer').scrollTop = 0;
  }
  
  // ฟังก์ชันแปลงชื่อวิธีการชำระเงิน
  function getPaymentMethodName(method) {
    switch(method) {
      case 'bank': return 'โอนเงินผ่านธนาคาร';
      case 'credit': return 'บัตรเครดิต/เดบิต';
      case 'promptpay': return 'พร้อมเพย์';
      case 'cod': return 'เก็บเงินปลายทาง (COD)';
      default: return method || 'ไม่ระบุ';
    }
  }
  
  // ฟังก์ชันดูรายละเอียดคำสั่งซื้อ
  function viewOrderDetails(orderId) {
    const order = orders.find(o => o.id === orderId);
    if (order) {
      alert(`ดูรายละเอียดคำสั่งซื้อ #${orderId}\n\nสถานะ: ${getStatusText(order.status)}\nวันที่สั่งซื้อ: ${order.date}\nยอดรวม: ${order.total} บาท`);
    }
  }
  
  // ฟังก์ชันสั่งซื้ออีกครั้ง
  function reorder(orderId) {
    const order = orders.find(o => o.id === orderId);
    if (order) {
      // เพิ่มสินค้าในตะกร้า
      cart = [...order.items];
      localStorage.setItem('cart', JSON.stringify(cart));
      updateCartBadge();
      
      // ปิด modal และเปิดตะกร้า
      closeOrderHistoryModal();
      openCartModal();
      
      showNotification('เพิ่มสินค้าในตะกร้าเรียบร้อยแล้ว', 'success');
    }
  }
  
  // ฟังก์ชันแปลงสถานะเป็นข้อความ
  function getStatusText(status) {
    switch(status) {
      case 'pending': return 'รอดำเนินการ';
      case 'processing': return 'กำลังเตรียมสินค้า';
      case 'shipped': return 'จัดส่งแล้ว';
      case 'delivered': return 'จัดส่งสำเร็จ';
      case 'cancelled': return 'ยกเลิก';
      default: return 'ไม่ระบุ';
    }
  }
  
  // ฟังก์ชันลบคำสั่งซื้อ
  function deleteOrder(orderId) {
    if (confirm('คุณแน่ใจหรือไม่ว่าต้องการลบรายการสั่งซื้อนี้?')) {
      const index = orders.findIndex(order => order.id === orderId);
      
      if (index !== -1) {
        orders.splice(index, 1);
        
        localStorage.setItem('orderHistory', JSON.stringify(orders));
        filteredOrders = orders.filter(order => order.id !== orderId);
        
        currentPage = 1;
        displayOrderHistory();
        generatePagination();
        
        showNotification('ลบรายการสั่งซื้อสำเร็จ', 'success');
      } else {
        showNotification('ไม่พบรายการสั่งซื้อที่ต้องการลบ', 'error');
      }
    }
  }
  
</script>
</body>
</html>